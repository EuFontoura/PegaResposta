from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.chrome.options import Options

def extrair_conteudo(url):
    try:
        # Opcional: abrir minimizado
        options = Options()
        driver = webdriver.Chrome(options=options)

        print("Abrindo página...")
        driver.get(url)
        driver.minimize_window()

        print("Aguardando o conteúdo carregar...")

        xpaths_para_tentar = [
            "/html/body/div[1]/div[1]/div[2]/section/section[2]/div/section/div/div/div/div/section/div/div/p",
            "/html/body/div[1]/div[1]/div[2]/section/section[2]/div/section/div/div/div/div/section/div/p"
        ]

        paragrafo = None
        for xpath in xpaths_para_tentar:
            try:
                paragrafo = WebDriverWait(driver, 5).until(
                    EC.presence_of_element_located((By.XPATH, xpath))
                )
                break  # achou, então sai do loop
            except:
                continue  # tenta o próximo

        if paragrafo:
            texto_paragrafo = paragrafo.text
            print("\nConteúdo extraído com sucesso!")
            print("\nTexto do parágrafo extraído:")
            print(texto_paragrafo)
        else:
            print("Não foi possível encontrar o conteúdo com os XPaths informados.")

    except Exception as e:
        print(f"Erro ao tentar extrair o conteúdo: {e}")
    finally:
        driver.quit()

def main():
    print("Bem-vindo ao Extrator de Conteúdo do Passei Direto!")
    url = input("Insira o URL da página: ").strip()
    if url:
        extrair_conteudo(url)
    else:
        print("URL inválida ou não fornecida.")

if __name__ == "__main__":
    main()
